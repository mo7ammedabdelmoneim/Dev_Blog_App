@model IEnumerable<Post>
@{
    Layout = "_AdminLayout";
}

<section class="max-w-7xl mx-auto bg-white shadow-lg rounded-2xl p-8 mt-10">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
            📋 Manage Posts
        </h2>
        <a asp-action="Add"
           class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
            + Add New Post
        </a>
    </div>

    <table class="w-full text-left border-collapse">
        <thead>
            <tr class="bg-gray-100 text-gray-600 text-sm uppercase tracking-wider">
                <th class="p-3">Cover</th>
                <th class="p-3">Title</th>
                <th class="p-3">Category</th>
                <th class="p-3">Tags</th>
                <th class="p-3">Author</th>
                <th class="p-3">Date</th>
                <th class="p-3 text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var post in Model)
            {
                <tr class="border-b hover:bg-gray-50 transition">
                    <td class="p-3">
                        <img src="@post.CoverUrl" class="w-16 h-12 object-cover rounded-md" />
                    </td>
                    <td class="p-3 font-semibold text-gray-800">@post.Title</td>
                    <td class="p-3 text-gray-600">@post.Category?.Name</td>
                    <td class="p-3 text-gray-600">
                        @string.Join(", ", post.Tags.Select(t => t.Name))
                    </td>
                    <td class="p-3 text-gray-600">@post.User?.UserName</td>
                    <td class="p-3 text-gray-600">@post.CreationDate.ToString("yyyy-MM-dd")</td>
                    <td class="p-3 text-center">
                        <div class="flex justify-center gap-2">
                            <a asp-action="Update" asp-route-id="@post.Id"
                               class="text-indigo-600 hover:text-indigo-800 font-medium">Edit</a>
                            <form asp-action="Delete" asp-route-id="@post.Id" method="post" onsubmit="return confirm('Are you sure?')">
                                <button type="submit" class="text-red-600 hover:text-red-800 font-medium">Delete</button>
                            </form>
                            <a asp-action="Details" asp-route-id="@post.Id"
                               class="text-gray-600 hover:text-gray-800 font-medium">View</a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    @if (!Model.Any())
    {
        <div class="text-center text-gray-400 py-10">
            No posts found.
        </div>
    }
</section>
