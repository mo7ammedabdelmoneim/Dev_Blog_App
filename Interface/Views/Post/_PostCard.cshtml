@model PostViewModel
@using System.Text.RegularExpressions

<div class="relative bg-white rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 overflow-hidden">
    <!-- Image Section -->
    <div class="relative group">
        <img src="@Model?.CoverUrl" alt="@Model?.Title" class="w-full h-56 object-cover rounded-t-3xl transition-transform duration-300 group-hover:scale-105">
        <div class="absolute top-4 left-4 flex flex-wrap gap-2">
            @if (Model?.Tags != null && Model.Tags.Any())
            {
                foreach (var tag in Model.Tags)
                {
                    <a asp-controller="Post" asp-action="ByTag" asp-route-tag="@tag.Name"
                       class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/90 text-gray-800 text-xs font-medium hover:bg-indigo-500 hover:text-white transition-all duration-200 shadow-sm">
                        @tag.Name
                    </a>
                }
            }
        </div>
    </div>

    <!-- Content Section -->
    <div class="p-6 space-y-4">
        <!-- Title -->
        <h3 class="text-xl font-semibold text-gray-900 leading-tight">
            <a asp-action="Details" asp-controller="Post" asp-route-slug="@Model?.Slug"
               class="hover:text-indigo-600 transition-colors duration-200">
                @Model?.Title
            </a>
        </h3>

        <!-- Snippet -->
        <p class="text-gray-600 text-sm leading-relaxed line-clamp-3">
            @{
                var plainText = Regex.Replace(Model?.Content ?? "", "<.*?>", string.Empty);
                var snippet = plainText.Length > 120 ? plainText[..120] + "..." : plainText;
            }
            @snippet
        </p>

        <!-- Meta -->
        <div class="flex items-center justify-between text-xs text-gray-500">
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3M3 11h18M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <span>@Model?.CreationDate.ToString("MMM d, yyyy")</span>
            </div>
            <div class="flex items-center gap-1.5">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
                <span class="font-medium">@Model?.Reacts</span>
            </div>
        </div>

        <!-- Author + Read More -->
        <div class="flex items-center justify-between pt-2 border-t border-gray-100">
            <div class="flex items-center gap-2 text-sm text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 12c2.7 0 4.9-2.2 4.9-4.9S14.7 2.2 12 2.2 7.1 4.4 7.1 7.1 9.3 12 12 12zm0 2c-3.3 0-9.8 1.7-9.8 5v2.7h19.6V19c0-3.3-6.5-5-9.8-5z" />
                </svg>
                <span class="font-medium">@Model?.AuthorName</span>
            </div>
            <a asp-action="Details" asp-controller="Post" asp-route-slug="@Model?.Slug"
               class="text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center gap-1 transition-colors duration-200">
                Read More
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>
    </div>
</div>